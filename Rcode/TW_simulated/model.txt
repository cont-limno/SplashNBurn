
model {

#### Disjointed broken stick

for (i in 1:N){
	y2[i] ~ dnorm(temp2[i], tau2)
	temp2[i] <- (beta1+delta1*step(x[i]-phi)) +
	(beta2+delta2*step(x[i]-phi))*(x[i]-phi)
# pred2[i] <- temp2[i] # predicted value
# resid2[i] <- y2[i] - pred2[i] # residual

}

delta1 ~ dnorm(0, 0.01)
delta2 ~ dnorm(0, 0.01)
beta1 ~ dnorm(0, 0.001)
beta2 ~ dnorm(0, 0.001)

tau2 <- pow(sigma2, -2)
sigma2 ~ dunif(0, 10)
phi ~ dunif(low,up)

} # end model

